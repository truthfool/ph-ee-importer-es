{"attributes":{"description":"","kibanaSavedObjectMeta":{"searchSourceJSON":"{"query":{"language":"kuery","query":""},"filter":[]}"},"title":"Vega Visualisation 1: Time taken for each task","uiStateJSON":"{}","version":1,"visState":"{"title":"Vega Visualisation 1: Time taken for each task","type":"vega","aggs":[],"params":{"spec":"{\n  \"$schema\": \"https://vega.github.io/schema/vega-lite/v5.json\",\n  \"title\": \"Event counts from all indexes\",\n  \"data\": {\n    \"url\": {\n      \"index\": \"_all\",\n      \"body\": {\n     \"aggs\": {\n        categories: {\n         terms: { field: \"value.elementId\" }\n        \"aggs\": {\n        \"duration\": {\n          \"scripted_metric\": {\n            \"init_script\": \"state.responses = ['start':0,'stop':0]\", \n            \"map_script\": \"def intent = doc['intent'].value; if (intent.contains('COMPLETED')) {state.responses.stop += doc['timestamp'].value.getMillis();} else if(intent.contains('CREATED')) {state.responses.start += doc['timestamp'].value.getMillis();} else {state.responses.start += 0;state.responses.stop += 0;}\",\n            \"combine_script\": \"state.responses\",\n            \"reduce_script\": \"def diff = null;for (responses in states) {diff = responses['stop'] - responses['start'];}return diff;\"\n          }\n        }\n      }\n          \n    }\n  }\n  \"size\": 0,\n  \"query\": {\n    \"bool\": {\n      \"must\": [],\n      \"filter\": [\n        {\n          \"match_all\": {}\n        },\n        {\n          \"match_phrase\": {\n            \"value.bpmnProcessId\": \"mpesa-flow-v3\"\n          }\n        },\n        {\n          \"match_phrase\": {\n            \"value.processInstanceKey\": 2251799831883666\n          }\n        },\n      ],\n      \"should\": [],\n      \"must_not\": [\n      {\n         \"match_phrase\": {\n            \"value.elementId\": \"Gateway_0y10qkw\"\n          }\n        }{\n          \"match_phrase\": {\n            \"value.elementId\": \"Gateway_071nepp\"\n          }\n      }{\n          \"match_phrase\": {\n            \"value.elementId\": \"Gateway_1hsu2ep\"\n          }\n      }\n      {\n          \"match_phrase\": {\n            \"value.elementId\": \"Event_1b36xu9\"\n          }\n      }\n      {\n          \"match_phrase\": {\n            \"value.elementId\": \"StartEvent_1\"\n          }\n      }\n       {\n          \"match_phrase\": {\n            \"value.elementId\": \"StartEvent_1\"\n          }\n      }\n       {\n          \"match_phrase\": {\n            \"value.elementId\": \"Flow_03ncatg\"\n          }\n      }\n      ]\n    }\n  }\n  }\n    },\n     format: {property: \"aggregations.categories.buckets\" }\n  },\n  mark: bar\n\n  encoding: {\n    x: {\"field\": \"duration.value\", \n          \"type\": \"temporal\",  \n          \"timeUnit\": \"seconds\",\n          \"axis\": {title: \"Time taken in miliseconds \" }\n      \n      }\n    y: {\n      field: key\n      type: nominal\n      axis: { title: \"Tasks\" }\n    }\n    color: {\n      field: key\n      type: nominal\n    }\n  }\n  \"layer\": [\n    {\n      \"mark\": \"rect\",\n      \"encoding\": {\n        \"color\": {\n          \"field\": \"duration.value\",\n          \"type\": \"temporal\",\n           \"timeUnit\": \"milliseconds\",\n          \"title\": \"Time elapsed\",\n          \"legend\": {\"direction\": \"horizontal\", \"gradientLength\": 120}\n        }\n      }\n    }]\n}"}}"},"coreMigrationVersion":"7.13.2","id":"2e472360-5e88-11ec-a438-afa3cbc0f058","migrationVersion":{"visualization":"7.13.1"},"references":[],"type":"visualization","updated_at":"2022-01-17T08:38:32.243Z","version":"WzEwNTAxLDEzXQ=="}
{"exportedCount":1,"missingRefCount":0,"missingReferences":[]}